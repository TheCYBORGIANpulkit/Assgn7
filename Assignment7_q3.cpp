#include <iostream>
#include <iomanip>
#include <string>
#include <fstream>
#include <cstdlib>
#include <cmath>
#include "Library.cpp"
using namespace std;



void cases(float h){
    cout << "Case when h: " << h << endl;
    float x, u, t, y, v, e, g1, g2, g3, b, b1, b2, b3;
    int a;
    x = 0;
    u = 1;
    t = 1;
    y = 2 * (exp(1) - 1);
    cout << "Enter the 1st guess: " << endl;
    cin >> g1;
    v = g1;
    b = y;
    b1 = shoot(u, v, x, t, h, 1);
    cout << "b1: " << b1 << endl;
    if (fabs(b1 - b) < 0.00005){
        cout << "  The value of x and respective z are: ";
        e = shoot(u, v, x, t, h, 1);
        return;
    }
    else{
        cout << "Enter the 2nd guess :" << endl;
        cin >> g2;
        v = g2;
        b2 = shoot(u, v, x, t, h, 1);
        cout << "b2: " << b2 << endl;
    }
    if (fabs(b2 - b) < 0.00005){
        cout << "  The value of x and respective z are " << endl;
        e = shoot(u, v, x, t, h, 1);
        return;
    }
    else{
        cout << "g1 = " << g1 << endl;
        cout << "g2 = " << g2 << endl;
        g3 = g2 + (((g2 - g1) * (b - b2)) / (b2 - b1));
        if (b1 - b2 == 0)return;

        cout << "Exact value of guess3: " << g3 << endl;
        v = g3;
        b3 = shoot(u, v, x, t, h, 0);
    }
    if (fabs(b3 - b) < 0.00005){
        cout << "For which solution is :" << endl;
        e = shoot(u, v, x, t, h, 1);
        return;
    }
    do{
        g1 = g2;
        g2 = g3;
        b1 = b2;
        b2 = b3;
        g3 = g2 + (((g2 - g1) * (b - b2)) / (b2 - b1));
        v = g3;
        b3 = shoot(u, v, x, t, h, 0);

    } while (fabs(b3 - b) < 0.00005);
    v = g3;
    e = shoot(u, v, x, t, h, 1);
}

int main()
{
	cout << "Given ODE : y'' = y' + 1" << endl;
    cout << "Given boundary values :y(0) = 1, y(1) = 2(e-1)" << endl;

    cases(0.5);
    cases(0.2);
    cases(0.05);
    cases(0.02);
    return 0;
    /*RESULT:
    Given ODE : y'' = y' + 1
Given boundary values :y(0) = 1, y(1) = 2(e-1)
Case when h: 0.5
Enter the 1st guess:
-1
x     u
0.5    1.5
1    1.5
b1: 1.5
Enter the 2nd guess :
-2
x     u
0.5    0.851562
1    -0.865784
b2: -0.865784
g1 = -1
g2 = -2
Exact value of guess3: -0.181428
For which solution is :
x     u
0.5    2.03079
1    3.43656
Case when h: 0.2
Enter the 1st guess:
-1
x     u
0.2    1.8
0.4    2.4
0.6    2.8
0.8    3
1    3
b1: 3
Enter the 2nd guess :
-2
x     u
0.2    1.5786
0.4    1.68678
0.6    1.26468
0.8    0.239155
1    -1.4791
b2: -1.4791
g1 = -1
g2 = -2
Exact value of guess3: -0.902533

For which solution is :
x     u
0.2    1.82158
0.4    2.46952
0.6    2.94964
0.8    3.26909
1    3.43656
Case when h: 0.05
Enter the 1st guess:
-1
x     u
0.05    1.95
0.1    2.85
0.15    3.7
0.2    4.5
0.25    5.25
0.3    5.95
0.35    6.6
0.4    7.2
0.45    7.75
0.5    8.25
0.55    8.7
0.6    9.1
0.65    9.45
0.7    9.75
0.75    10
0.8    10.2
0.85    10.35
0.9    10.45
0.95    10.5
1    10.5
b1: 10.5
Enter the 2nd guess :
-2
x     u
0.05    1.89873
0.1    2.69356
0.15    3.38172
0.2    3.96032
0.25    4.4263
0.3    4.77644
0.35    5.00737
0.4    5.11554
0.45    5.09723
0.5    4.94851
0.55    4.66526
0.6    4.24314
0.65    3.6776
0.7    2.96385
0.75    2.09685
0.8    1.0713
0.85    -0.118342
0.9    -1.47794
0.95    -3.01365
1    -4.73194
b2: -4.73194
g1 = -1
g2 = -2
Exact value of guess3: -1.46373

For which solution is :
x     u
0.05    1.92622
0.1    2.77745
0.15    3.55241
0.2    4.24974
0.25    4.86803
0.3    5.40579
0.35    5.86146
0.4    6.23339
0.45    6.51985
0.5    6.71902
0.55    6.82899
0.6    6.84775
0.65    6.77319
0.7    6.60309
0.75    6.33511
0.8    5.96679
0.85    5.49557
0.9    4.91871
0.95    4.23338
1    3.43657
Case when h: 0.02
Enter the 1st guess:
-1
x     u
0.02    1.98
0.04    2.94
0.06    3.88
0.08    4.8
0.1    5.7
0.12    6.58
0.14    7.44
0.16    8.28
0.18    9.1
0.2    9.9
0.22    10.68
0.24    11.44
0.26    12.18
0.28    12.9
0.3    13.6
0.32    14.28
0.34    14.94
0.36    15.58
0.38    16.2
0.4    16.8
0.42    17.38
0.44    17.94
0.46    18.48
0.48    19
0.5    19.5
0.52    19.98
0.54    20.44
0.56    20.88
0.58    21.3
0.6    21.7
0.62    22.08
0.64    22.44
0.66    22.78
0.68    23.1
0.7    23.4
0.72    23.68
0.74    23.94
0.76    24.18
0.78    24.4
0.8    24.6
0.82    24.78
0.84    24.94
0.86    25.08
0.88    25.2
0.9    25.3
0.92    25.38
0.94    25.44
0.96    25.48
0.98    25.5
1    25.5
1.02    25.48
b1: 25.48
Enter the 2nd guess :
-2
x     u
0.02    1.9598
0.04    2.87899
0.06    3.75715
0.08    4.59386
0.1    5.38869
0.12    6.1412
0.14    6.85092
0.16    7.51741
0.18    8.14019
0.2    8.71879
0.22    9.25271
0.24    9.74146
0.26    10.1845
0.28    10.5814
0.3    10.9315
0.32    11.2344
0.34    11.4895
0.36    11.6961
0.38    11.8539
0.4    11.962
0.42    12.0201
0.44    12.0274
0.46    11.9833
0.48    11.8872
0.5    11.7385
0.52    11.5365
0.54    11.2805
0.56    10.9698
0.58    10.6038
0.6    10.1816
0.62    9.7027
0.64    9.16622
0.66    8.57143
0.68    7.91755
0.7    7.2038
0.72    6.42937
0.74    5.59343
0.76    4.69516
0.78    3.73368
0.8    2.70814
0.82    1.61764
0.84    0.461276
0.86    -0.761885
0.88    -2.05278
0.9    -3.41239
0.92    -4.84168
0.94    -6.34166
0.96    -7.91336
0.98    -9.55781
1    -11.2761
1.02    -13.0693
b2: -13.0693
g1 = -1
g2 = -2
Exact value of guess3: -1.57182
For which solution is :
x     u
0.02    1.96845
0.04    2.90511
0.06    3.80975
0.08    4.68213
0.1    5.52199
0.12    6.32908
0.14    7.10315
0.16    7.84393
0.18    8.55116
0.2    9.22456
0.22    9.86384
0.24    10.4687
0.26    11.0389
0.28    11.5742
0.3    12.0741
0.32    12.5385
0.34    12.9669
0.36    13.3591
0.38    13.7148
0.4    14.0335
0.42    14.3151
0.44    14.559
0.46    14.765
0.48    14.9327
0.5    15.0618
0.52    15.1518
0.54    15.2023
0.56    15.2131
0.58    15.1836
0.6    15.1135
0.62    15.0023
0.64    14.8497
0.66    14.6552
0.68    14.4183
0.7    14.1386
0.72    13.8157
0.74    13.449
0.76    13.0381
0.78    12.5825
0.8    12.0817
0.82    11.5352
0.84    10.9425
0.86    10.303
0.88    9.61618
0.9    8.88154
0.92    8.09849
0.94    7.26645
0.96    6.38485
0.98    5.45307
1    4.47051
1.02    3.43655
*/
}

